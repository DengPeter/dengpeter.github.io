<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Rongfei" />
        <meta name="copyright" content="Rongfei" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="mysql, prompt, database, " />

<meta property="og:title" content="mysql提示符 "/>
<meta property="og:url" content="/mysqlti-shi-fu.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="LearnDevOps" />
<meta property="og:article:author" content="Rongfei" />
<meta property="og:article:published_time" content="2016-07-18T00:00:00+08:00" />
<meta name="twitter:title" content="mysql提示符 ">
<meta name="twitter:description" content="">

        <title>mysql提示符  · LearnDevOps
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>LearnDevOps</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/pages/about-me.html">About Me</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/mysqlti-shi-fu.html"> mysql提示符  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>很多时候打开mysql的终端，并不能直观的看到当前是哪个用户在哪个库下面，极其容易造成误操作。mysql给我们提供了终端提示符定制的功能就像系统PS1变量一样。</p>
<p>在配置文件中my.cnf增加</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">vim my.cnf
[client]
prompt=&quot;\h@\u [\d]&gt;&quot;
</pre></div>


<p>然后登录mysql shell 看到提示符的变化：
 <code>localhost@root [mysql]&gt;</code>
 \h当前主机名，
 \u当前用户是mysql用户,
 \d是当前数据库</p>
<p><a href="http://dev.mysql.com/doc/refman/5.7/en/mysql-commands.html">官方文档</a>
The prompt command reconfigures the default mysql&gt; prompt. The string for defining the prompt can contain the following special sequences.
Option  Description</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">\C  The current connection identifier (MySQL 5.7.6 and up)
\c  A counter that increments for each statement you issue
\D  The full current date
\d  The default database
\h  The server host
\l  The current delimiter
\m  Minutes of the current time
\n  A newline character
\O  The current month in three-letter format (Jan, Feb, …)
\o  The current month in numeric format
\P  am/pm
\p  The current TCP/IP port or socket file
\R  The current time, in 24-hour military time (0–23)
\r  The current time, standard 12-hour time (1–12)
\S  Semicolon
\s  Seconds of the current time
\t  A tab character
\U
Your full user_name@host_name account name

\u  Your user name
\v  The server version
\w  The current day of the week in three-letter format (Mon, Tue, …)
\Y  The current year, four digits
\y  The current year, two digits
\_  A space
\   A space (a space follows the backslash)
\&#39;  Single quote
\&quot;  Double quote
\\  A literal “\” backslash character
\x
x, for any “x” not listed above
</pre></div>


<p>You can set the prompt in several ways:</p>
<p>Use an environment variable. You can set the MYSQL_PS1 environment variable to a prompt string. For example:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">shell&gt; export MYSQL_PS1=&quot;(\u@\h) [\d]&gt; &quot;
</pre></div>


<p>Use a command-line option. You can set the &ndash;prompt option on the command line to mysql. For example:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">shell&gt; mysql --prompt=&quot;(\u@\h) [\d]&gt; &quot;
(user@host) [database]&gt;
</pre></div>


<p>Use an option file. You can set the prompt option in the [mysql] group of any MySQL option file, such as /etc/my.cnf or the .my.cnf file in your home directory. For example:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">[mysql]
prompt=(\\u@\\h) [\\d]&gt;\\_
</pre></div>


<p>In this example, note that the backslashes are doubled. If you set the prompt using the prompt option in an option file, it is advisable to double the backslashes when using the special prompt options. There is some overlap in the set of permissible prompt options and the set of special escape sequences that are recognized in option files. (The rules for escape sequences in option files are listed in Section 5.2.6, “Using Option Files”.) The overlap may cause you problems if you use single backslashes. For example, \s is interpreted as a space rather than as the current seconds value. The following example shows how to define a prompt within an option file to include the current time in HH:MM:SS&gt; format:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">[mysql]
prompt=&quot;\\r:\\m:\\s&gt; &quot;
</pre></div>


<p>Set the prompt interactively. You can change your prompt interactively by using the prompt (or \R) command. For example:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">mysql&gt; prompt (\u@\h) [\d]&gt;\_
PROMPT set to &#39;(\u@\h) [\d]&gt;\_&#39;
(user@host) [database]&gt;
(user@host) [database]&gt; prompt
Returning to default PROMPT of mysql&gt;
mysql&gt;
</pre></div>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2016-07-18T00:00:00+08:00"> 7 18, 2016</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#database-ref">database</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#mysql-ref">mysql
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#prompt-ref">prompt
                    <span>1</span>
</a></li>
            </ul>
        </div>
        </section>
</div>

<!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="mysql提示符" data-title="mysql提示符" data-url="http://blog.pyshell.cn/mysqlti-shi-fu.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"devops"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
<!-- baidu tongji   -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?b6fb6111b823b418109202b642b4a62b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!-- baidu tongji  end -->

</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>