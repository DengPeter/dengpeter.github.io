<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Chrysan" />
        <meta name="copyright" content="Chrysan" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="开发环境, vagrant, virtualbox, ops, " />

<meta property="og:title" content="统一开发环境 "/>
<meta property="og:url" content="/tong-yi-kai-fa-huan-jing.html" />
<meta property="og:description" content="在一个团队中常常出现开发自己程序跑通了，但放到测试环境， 或者其他开发者机器上就有各种bug出现，并且花好长时间才找到答案，某个服务少了一个扩展[狂汗]。 统一开发环境有很多方案虚拟机，远程服务器，docker等。这里采用启虚拟机，将开发环境打包一个镜像然后在开发人员机器上导入即可使用。 0x00 基础环境vagrant virtualbox virtualbox 开源虚拟机,基础这里就不多介绍了。 选择自己的(mac、windows、Linux …)平台下载安装下载安装下载地址 vagrant 是去gui化的虚拟机管理程序，可以支持大多数虚拟机桌面版：vmware、virtualbox、parallels 等,服务器版：kvm等 下载地址 安装完后在命令行 执行$ vagrant 会提示vagrant的使用帮助文档 0x01 导入镜像 镜像是自己提前做好的，vagrant具体使用请见vagrant使用 0x02 资源包目录结构: devworkspace ├── Vagrantfile # 虚拟机管理文件(配置主机名,ip等信息) ├── box ..." />
<meta property="og:site_name" content="LearnDevOps" />
<meta property="og:article:author" content="Chrysan" />
<meta property="og:article:published_time" content="2016-07-04T10:56:32+08:00" />
<meta name="twitter:title" content="统一开发环境 ">
<meta name="twitter:description" content="在一个团队中常常出现开发自己程序跑通了，但放到测试环境， 或者其他开发者机器上就有各种bug出现，并且花好长时间才找到答案，某个服务少了一个扩展[狂汗]。 统一开发环境有很多方案虚拟机，远程服务器，docker等。这里采用启虚拟机，将开发环境打包一个镜像然后在开发人员机器上导入即可使用。 0x00 基础环境vagrant virtualbox virtualbox 开源虚拟机,基础这里就不多介绍了。 选择自己的(mac、windows、Linux …)平台下载安装下载安装下载地址 vagrant 是去gui化的虚拟机管理程序，可以支持大多数虚拟机桌面版：vmware、virtualbox、parallels 等,服务器版：kvm等 下载地址 安装完后在命令行 执行$ vagrant 会提示vagrant的使用帮助文档 0x01 导入镜像 镜像是自己提前做好的，vagrant具体使用请见vagrant使用 0x02 资源包目录结构: devworkspace ├── Vagrantfile # 虚拟机管理文件(配置主机名,ip等信息) ├── box ...">

        <title>统一开发环境  · LearnDevOps
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>LearnDevOps</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/pages/about-me.html">About Me</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/tong-yi-kai-fa-huan-jing.html"> 统一开发环境  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>在一个团队中常常出现开发自己程序跑通了，但放到测试环境，
或者其他开发者机器上就有各种bug出现，并且花好长时间才找到答案，某个服务少了一个扩展[狂汗]。
统一开发环境有很多方案虚拟机，远程服务器，docker等。这里采用启虚拟机，将开发环境打包一个镜像然后在开发人员机器上导入即可使用。</p>
<h1 id="0x00-vagrant-virtualbox">0x00 基础环境vagrant virtualbox</h1>
<ul>
<li>
<p>virtualbox 开源虚拟机,基础这里就不多介绍了。
    选择自己的(mac、windows、Linux &hellip;)平台下载安装下载安装<a href="https://www.virtualbox.org/wiki/Downloads">下载地址</a></p>
</li>
<li>
<p>vagrant 是去gui化的虚拟机管理程序，可以支持大多数虚拟机桌面版：vmware、virtualbox、parallels 等,服务器版：kvm等
    <a href="https://www.vagrantup.com/downloads.html">下载地址</a>
    安装完后在命令行 执行<code>$ vagrant</code> 会提示vagrant的使用帮助文档</p>
</li>
</ul>
<h1 id="0x01">0x01 导入镜像</h1>
<p>镜像是自己提前做好的，vagrant具体使用请见<a href="http://localhost:8000/tong-yi-kai-fa-huan-jing.html">vagrant使用</a></p>
<h1 id="0x02">0x02 资源包目录结构:</h1>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">devworkspace
├── Vagrantfile   # 虚拟机管理文件(配置主机名,ip等信息)
├── box
│   ├── VirtualBox-5.0.16-105871-OSX.dmg
│   ├── dev.box # 封装好开发环境的linux镜像
│   └── vagrant_1.8.1.dmg
├── data    # 共享目录 存放网站图片等信息 在虚拟机中映射为/alidata1 目录
│   ├── code
│   └── logs
├── devdep.md
├── profile # apache 配置文件
│   └── conf
│       ├── httpd-vhosts.conf -&gt; /opt/apache/conf/extra/httpd-vhosts.conf
│       ├── httpd.conf -&gt; /opt/apache/conf/httpd.conf
└── www # 网站运行目录 在虚拟机中映射为/global/www 目录
    └── example
</pre></div>


<h1 id="0x03">0x03 导入镜像</h1>
<h4 id="_1">本机操作</h4>
<ol>
<li>
<p>mac版:将资源包拷贝到家目录中</p>
</li>
<li>
<p>进入工作目录
    <code>cd /Users/username/devworkspace  # usename是你的用户名</code></p>
</li>
<li>
<p>导入镜像
    <code>vagrant box add workhost ./box/dev.box</code></p>
</li>
<li>
<p>启动虚拟机
    <code>vagrant up</code></p>
</li>
<li>
<p>登陆虚拟机
    <code>vagrant ssh</code></p>
</li>
<li>
<p>访问example</p>
<p>虚拟机配置的ip为 192.168.33.10
在浏览器中输入: http://192.168.33.10</p>
</li>
</ol>
<h4 id="_2">虚拟机中操作</h4>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">1. 配置自己的虚拟主机
    `vim httpd-vhosts.conf`

在虚拟主机配置文件中有一个例子,配置新虚拟主机只需要复制一份例子稍作修改即可.
配置样例:

    ```
    &lt;VirtualHost *:80&gt;
        DocumentRoot &quot;/global/www/example&quot;
        ServerName   localhost
        ErrorLog &quot;/alidata1/logs/apache/example_error.log&quot;
        CustomLog &quot;/alidata1/logs/apache/example_access.log&quot; common
        &lt;Directory &quot;/global/www/example&quot;&gt;
           Options FollowSymLinks
           AllowOverride All
           Order allow,deny
           Allow from all
        &lt;/Directory&gt;
    &lt;/VirtualHost&gt;
    ```

  这是基于域名配置的虚拟主机,新主机只需要修改如下几项(新主机配置为crz trunk):

      #1. 代码目录 指定自己存放代码的路径
      DocumentRoot &quot;/global/www/crz/trunk&quot;
      &lt;Directory &quot;/global/www/crz/trunk&quot;&gt;

      #2. 访问域名
      ServerName   crz.cn

      ```

 2. 配置hosts文件
      在 /etc/hosts 文件中添加
      ```vim
      192.168.33.10 crz.cn

      注: 上面的记录需要在物理主机  和 虚拟机中添加.
          这里的192.168.33.10 ip是虚拟主机的ip地址
</pre></div>


<ul>
<li>
<ol>
<li>
<p>重启apache</p>
<p><code>sudo service httpd restart</code></p>
</li>
</ol>
</li>
<li>
<ol>
<li>在物理机访问测试</li>
</ol>
<p>在浏览器中访问 crz.cn</p>
</li>
</ul>
<h1 id="0x04">0x04 虚拟机管理(在物理上)</h1>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">虚拟机管理需要在工作目录中进行
cd ./devworkspace
启动虚拟机 `vagrant up`
关闭虚拟机 `vagrant halt`
登陆虚拟机 `vagrant ssh`
</pre></div>


<h1 id="0x05-apache-mysql">0x05 apache mysql管理(在虚拟机上)</h1>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%">[vagrant@work ~]$ service mysqld.server
Useage: [ start|stop|restart|status ]
[vagrant@work ~]$ service httpd
Useage: [ start|stop|restart|status ]
</pre></div>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2016-07-04T10:56:32+08:00"> 7 4, 2016</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#ops-ref">ops</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#kai-fa-huan-jing-ref">开发环境
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#vagrant-ref">vagrant
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#virtualbox-ref">virtualbox
                    <span>1</span>
</a></li>
            </ul>
        </div>
        </section>
</div>

<!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="统一开发环境" data-title="统一开发环境" data-url="http://blog.pyshell.cn/tong-yi-kai-fa-huan-jing.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"devops"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
<!-- baidu tongji   -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?b6fb6111b823b418109202b642b4a62b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!-- baidu tongji  end -->

</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>